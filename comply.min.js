jQuery(document).ready(function(e){function t(){f.on("keydown",function(t){if(t.shiftKey||9!==t.which){if(27===t.which)i();else if(37===t.which||t.shiftKey&&9===t.which)u&&o();else if(39===t.which)u&&a();else if(38===t.which)u&&o();else if(40===t.which){if("skipper"===m)return p=0,e(".working").addClass("ada-parent").removeClass("working"),e(v[w][p]).addClass("working").focus(),m="opened",void(y=!1);u&&a()}}else a(),u=!0,b||(b="start");(!t.shiftKey&&9===t.which||37===t.which||38===t.which||39===t.which||40===t.which||t.shiftKey&&9===t.which)&&(u&&t.preventDefault(),s(t))})}function i(){p=0,w=0,u=!1,y=!1,m=!1,e(".working, .ada-parent").removeClass("working ada-parent")}function n(){r=v[w].length-1}function a(){if("skipper"===m&&(p=c,m=!1),u===!1)n(),e(v[w][p]).addClass("working").focus(),e("body, html").scrollTop()>100&&e("html, body").animate({scrollTop:0},500);else if(p===r&&w!==v.length-1)y=v[w][p],e(".working").removeClass("working"),w++,p=0,e(v[w][p]).addClass("working").focus(),n();else{if(p===r&&w===v.length-1)return;u===!0&&(("start"===b||b===!0)&&(b=!1),e(v[w][p]).removeClass("working"),p++,e(v[w][p]).addClass("working").focus())}}function o(){"skipper"===m&&(p=d,m=!1),(0!==w||0!==p)&&(0===p&&0!==w?(y=v[w][p],e(".working").removeClass("working"),w--,n(),p=r,e(v[w][p]).addClass("working").focus()):(e(v[w][p]).removeClass("working"),p--,e(v[w][p]).addClass("working").focus()))}function s(t){if(C&&(h.removeClass("working"),C=!1),m!==!1)if("opened"===m)if(y===!1)0===e(v[w][p]).parents(k[w]).length&&(e(".ada-parent").removeClass("ada-parent"),e(v[w][p]).removeClass("working"),h.addClass("working").focus(),m=!0);else{var i;i=null===k[w]?"XXnothingXX":k[w],0===e(y).parents(i).length&&(e(".ada-parent").removeClass("ada-parent"),e(v[w][p]).removeClass("working"),h.addClass("working").focus(),c=0,m=!1,y=!1)}else 13===t.which||40===t.which?(e(".working").addClass("ada-parent").removeClass("working"),p=l,e(v[w][p]).addClass("working").focus(),m="opened"):!t.shiftKey&&9===t.which||39===t.which?(e(".working").removeClass("working"),p=c,e(v[w][p]).addClass("working").focus(),m=!1):(37===t.which||38===t.which||t.shiftKey&&9===t.which)&&(e(".working").removeClass("working"),p=d,e(v[w][p]).addClass("working").focus(),m=!1);else if(0!==e(v[w][p]).parents(k[w]).length&&null!==k[w]){e(v[w][p]).removeClass("working"),h=e(v[w][p]).parents(k[w]),h.addClass("working").focus(),(39===t.which||40===t.which||!t.shiftKey&&9===t.which)&&(l=p);for(var n=p;r>n;n++)0===e(v[w][n]).parents(k[w]).length?c=n:n===r-1&&(c=v[w].length-1,m="skipper");for(var a=p;a>=0;a--)0===e(v[w][a]).parents(k[w]).length?d=a:0===a&&(d=0,m="skipper"),(37===t.which||38===t.which||t.shiftKey&&9===t.which)&&0!==e(v[w][a]).parents(k[w]).length&&(l=a);m="skipper"!==m?!0:"skipper"}}var r,l,h,d,c,f=jQuery(document),g=jQuery("html"),u=!1,w=0,p=0,v=[],k=[],m=!1,C=!1,y=!1,b=!1,F="background: #FF0000; color:#FFFFFF; padding: 0 5px;",x="background: #009900; color:#FFFFFF; padding: 0 20px; font-size: 16px;",T="background: #000000; color:#FFFFFF; padding: 0 20px; font-size: 16px;",K="background: #FFA500; color:#FFFFFF; padding: 0 20px; font-size: 16px;";jQuery.fn.eleText=function(){return e(this).clone().children().remove().end().text()},e.adaSanitize=function(){if(e("b").length||e("i").length){var t=e("body").html();t=t.replace(/<b/g,"<b>").replace(/<\/strong>/g,"</strong>").replace(/<i/g,"<i>").replace(/<\/em>/g,"</em>"),e("body").html(t)}},e.adaAria=function(){var t;setTimeout(function(){e("button").length&&e("button").each(function(){void 0===e(this).attr("aria-label")&&(""!==e(this).eleText()?(t=e(this).eleText(),e(this).attr("aria-label",t)):void 0!==e(this).attr("title")?(t=e(this).attr("title"),e(this).attr("aria-label",t)):e(this).children("span").length&&""!==e(this).children("span").eq(0).eleText()?(t=e(this).children("span").eq(0).eleText(),e(this).attr("aria-label",t)):e(this).find("title").length&&""!==e(this).find("title").eq(0).eleText()&&(t=e(this).find("title").eq(0).text(),e(this).attr("aria-label",t)))}),e("label").length&&e("label").each(function(){void 0===e(this).attr("aria-label")&&e(this).attr("aria-label",e(this).eleText())})},500)},e.adaImages=function(t){var i;setTimeout(function(){for(var n=0;n<t.length;n++)e(t[n][0]).each(function(){(""===e(this).attr("alt")||void 0===e(this).attr("alt"))&&("parent"===t[n][1]?i=e(this).parents(t[n][2]).text():"sibling"===t[n][1]?i=e(this).siblings(t[n][2]).text():"combo"===t[n][1]?i=e(this).parents(t[n][2]).find(t[n][3]).text():"custom"===t[n][1]&&(i=t[n][2]),e(this).attr("alt",i))})},500)},e.adaBuilder=function(e){if(void 0===e)return console.log("%cYou have not defined an array of valid selectors.",F),!1;for(var i=0;i<e.length;i++)if(2===e[i].length){if(v[i]=e[i][0],0===e[i][1].length)return console.log(e[i][1]+"%c is not a valid parent element. Please fix before continuing.",F),!1;k[i]=e[i][1]}else v[i]=e[i],k[i]=null;t()},e.adaBuilder.notify=function(t){var i,n,a;"content"===t?(e("body").prepend('<div id="adaContent"></div>'),i=e("#adaContent")):"status"===t?(e("body").prepend('<div id="adaStatus"></div>'),n=e("#adaStatus")):(e("body").prepend('<div id="adaContent"></div>'),e("body").prepend('<div id="adaStatus"></div>'),i=e("#adaContent"),n=e("#adaStatus")),i.length&&i.text("Press SPACEBAR to skip to main content"),f.on("keydown",function(e){27===e.which&&(n.text("Menu navigation turned off"),n.removeClass("start").addClass("exit"),i.css("height",0),setTimeout(function(){n.css("opacity",0)},400),setTimeout(function(){i.removeClass("start"),n.removeClass("exit")},1e3)),32===e.which?i.hasClass("start")?i.removeClass("start"):i.addClass("start"):(!e.shiftKey&&9===e.which||37===e.which||38===e.which||39===e.which||40===e.which||e.shiftKey&&9===e.which)&&((b="start")?(i.addClass("start"),i.css("height","40px"),n.text("Menu navigation turned on. Press 'Esc' to turn off."),n.addClass("start").css("opacity",1),a=!0):a&&(i.removeClass("start"),n.removeClass("start"),a=!1))})},e.adaMainContent=function(t,i){g.on("keydown",function(n){u===!0&&32===n.which&&"start"===b?(n.preventDefault(),e("html, body").animate({scrollTop:e(t).offset().top},void 0===i?500:i),b=!0):u===!0&&32===n.which&&b===!0?(n.preventDefault(),e("html, body").animate({scrollTop:0},void 0===i?500:i),b="start",e("#adaMainContent").addClass("show")):e("#adaMainContent").removeClass("show")})},e.adaDebug=function(t){if(0===v.length)return console.log("%cADA Builder has not been ran yet. Run $.adaBuilder first with a valid array of elements",F),!1;if(void 0===t)return console.log("%cNo argument has been passed. Please enter a valid argument.",F),!1;if("adaLinks"===t)for(var i=0;i<v.length;i++){null===k[i]||null!==k[i]&&0===e(v[i][0]).parents(k[i]).length?e(v[i][0]).parent().prepend('<div style="position: absolute; text-align: center; line-height: initial; padding: 5px 0; width: 30px; background:#009900; color: #FFFFFF; z-index: 9999;">'+i+"</div>"):e(k[i]).prepend('<div style="position: absolute; text-align: center; line-height: initial; padding: 5px 0; width: 30px; background:#009900; color: #FFFFFF; z-index: 9999;">'+i+"</div>"),console.log("%cMENU ARRAY "+i,x);for(var n=0;n<v[i].length;n++)console.log(v[i][n].href)}else if("parentLinks"===t){console.log("%cPARENTS ARRAY",K);for(var a=0;a<k.length;a++)console.log(null!==k[a]?"Menu "+a+": "+k[a]:"Menu "+a+": null")}else if("index"===t)f.on("keydown",function(e){(!e.shiftKey&&9===e.which||37===e.which||38===e.which||39===e.which||40===e.which||e.shiftKey&&9===e.which)&&console.log("%cMenu: "+w+" Menu Item: "+p,T)});else{var i,n,a;f.on("keydown",function(e){e.shiftKey||9!==e.which?e.shiftKey&&9===e.which?console.log("Event: Shift+Tab"):27===e.which?console.log("Event: Esc"):37===e.which||e.shiftKey&&9===e.which?console.log("Event: Left arrow"):39===e.which?console.log("Event: Right arrow"):38===e.which?console.log("Event: Up arrow"):40===e.which&&console.log("Event: Down arrow"):console.log("Event: Tab")})}}}(jQuery));
